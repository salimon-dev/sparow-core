name: deploy
on:
  push:
    branches: [main]
jobs:
  build:
    runs-on: ubuntu-20.04
    steps:
      - name: checkout
        uses: actions/checkout@master
      - name: ssh-pipeline
        # You may pin to the exact commit or the version.
        # uses: cross-the-world/ssh-pipeline@7f022867934a210af826af99ef80d96f03a094d5
        uses: cross-the-world/ssh-pipeline@v1.2.0
        with:
          host: ${{ secrets.SERVER_IP }}
          user: ${{ secrets.SERVER_SSH_USER }}
          key: ${{ secrets.SERVER_SSH_KEY }}
          script: pwd
      - name: SSH remote run
        uses: Boberneprotiv/ssh-remove-run@v1
        with:
          host: ${{ secrets.SERVER_IP }}
          user: ${{ secrets.SERVER_SSH_USER }}
          private-key-path: ${{ secrets.SERVER_SSH_KEY }}
          run: pwd

